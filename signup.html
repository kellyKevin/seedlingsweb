<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sign Up</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        /* Inline styles for the signup form */
        body {
            font-family: Arial, sans-serif;
            background-color: #f8f9fa;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
        }

        .signup-container {
            background-color: #fff;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            width: 100%;
            max-width: 400px;
            box-sizing: border-box;
        }

        .signup-container h1 {
            text-align: center;
            margin-bottom: 24px;
            color: #333;
        }

        .signup-container label {
            display: block;
            margin-bottom: 8px;
            color: #333;
        }

        .signup-container input[type="email"],
        .signup-container input[type="password"],
        .signup-container input[type="text"] {
            width: 100%;
            padding: 10px;
            margin-bottom: 16px;
            border: 1px solid #ccc;
            border-radius: 4px;
            box-sizing: border-box;
        }

        .signup-container button {
            width: 100%;
            padding: 12px;
            background-color: #28a745;
            color: #fff;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }

        .signup-container button:hover {
            background-color: #218838;
        }

        .signup-container .login-link {
            text-align: center;
            margin-top: 20px;
        }

        .signup-container .login-link a {
            color: #007bff;
            text-decoration: none;
        }

        .signup-container .login-link a:hover {
            text-decoration: underline;
        }

        .error-message {
            color: red;
            margin-bottom: 16px;
            text-align: center;
        }

        .signout-button {
            margin-top: 20px;
            text-align: center;
        }

        .signout-button button {
            background-color: #dc3545;
            color: #fff;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
        }

        .signout-button button:hover {
            background-color: #c82333;
        }

        /* Modal styles */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0, 0, 0, 0.4);
        }

        .modal-content {
            background: url('images/bck.png') no-repeat center center fixed ;
            margin: 15% auto;
            padding: 20px;
            border: 1px solid #888;
            width: 80%;
            max-width: 400px;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        .modal-content h2 {
            text-align: center;
            margin-bottom: 20px;
        }

        .modal-content .terms-text {
            height: 200px;
            overflow-y: scroll;
            border: 1px solid #ddd;
            padding: 10px;
            margin-bottom: 20px;
            background: url('images/bck.png') no-repeat center center fixed ;
            border-radius: 4px;
        }

        .modal-content button {
            background-color: #015615;
            color: #fff;
            border: none;
            padding: 10px 10px;
            border-radius: 32px;
            cursor: pointer;
            float: right;
        }

        .modal-content button:hover {
            background-color: #218838;
        }
    </style>
</head>

<body>
    <div class="signup-container">
        <h1>Sign Up</h1>
        <form id="signupForm">
            <label for="username">Username:</label>
            <input type="text" id="username" name="username" required>

            <label for="email">Email:</label>
            <input type="email" id="email" name="email" required>

            <label for="password">Password:</label>
            <input type="password" id="password" name="password" required>

            <div class="terms">
                <input type="checkbox" id="termsCheckbox" disabled>
                <label for="termsCheckbox">I agree to the <a href="#" id="termsLink">Terms and Conditions</a></label>
            </div>

            <div class="error-message" id="errorMessage"></div>

            <button type="submit">Sign Up</button>
        </form>
        <div class="login-link">
            Already have an account? <a href="login.html">Login</a>
        </div>

        <div class="signout-button" id="signoutButton" style="display: none;">
            <button id="signOut">Sign Out</button>
        </div>
    </div>

    <!-- Modal for Terms and Conditions -->
    <div id="termsModal" class="modal">
        <div class="modal-content">
            <h2>Terms and Conditions</h2>
            <div class="terms-text">
                <p>
                    Terms and Conditions for Using and Engaging with Ottawa seedlings
                </p>
                <p>
                    Welcome to Ottawa seedlings! We're delighted to have you visit and use our platform dedicated to
                    selling seedlings, plants such as avocado (Hass and Fuerte), passion fruit (yellow and purple), and
                    other varieties. Before you proceed, please read and understand the following terms and conditions
                    that govern your use of our website:
                </p>
                <p>
                    <strong>Acceptance of Terms:</strong> By accessing or using Ottawa seedlings, you agree to abide
                    by these terms and conditions, our Privacy Policy, and any other guidelines or rules applicable to
                    specific services or features which may be posted from time to time.
                </p>
                <p>
                    <strong>Use of Services:</strong> [Your Website Name] provides a platform for browsing, purchasing,
                    and learning about various seedlings and plants, including but not limited to avocado and passion
                    fruit. You agree to use the services provided on our website solely for lawful purposes and in
                    accordance with these terms.
                </p>
                <p>
                    <strong>Product Information:</strong> We strive to provide accurate and up-to-date information about
                    our products, including descriptions, prices, and availability. However, we do not warrant that such
                    information is error-free, complete, or current. Prices and availability are subject to change
                    without notice.
                </p>
                <p>
                    <strong>Orders and Payments:</strong>
                <ul>
                    <li><strong>Order Placement:</strong> When you place an order through [Your Website Name], you are
                        making an offer to purchase the products selected at the prices and terms stated.</li>
                    <li><strong>Payment:</strong> Payment is required at the time of placing your order unless otherwise
                        agreed upon. We accept [List accepted payment methods].</li>
                    <li><strong>Cancellation:</strong> Orders may be canceled or modified before they are processed for
                        shipment. Once shipped, orders cannot be canceled.</li>
                </ul>
                </p>
                <p>
                    <strong>Shipping and Delivery:</strong>
                <ul>
                    <li><strong>Shipping:</strong> We aim to ship orders promptly and use reasonable efforts to meet
                        delivery estimates provided. However, delivery times may vary depending on factors beyond our
                        control.</li>
                    <li><strong>Risk of Loss:</strong> Risk of loss and title for products purchased from Ottawa
                        seedlings pass to you upon delivery to the carrier.</li>
                </ul>
                </p>
                <p>
                    <strong>Returns and Refunds:</strong>
                <ul>
                    <li><strong>Returns:</strong> We accept returns of unused and undamaged products within agreed
                        days of delivery. Please refer to our Returns Policy for detailed instructions.</li>
                    <li><strong>Refunds:</strong> Refunds will be processed within [number] days after receiving the
                        returned product, minus any applicable shipping charges.</li>
                </ul>
                </p>
                <p>
                    <strong>Intellectual Property:</strong> All content and materials available on Ottawa seedlings,
                    including text, graphics, logos, images, and software, are the property of Ottawa seedlings or
                    its licensors and are protected by intellectual property laws.
                </p>
                <p>
                    <strong>Privacy:</strong> Your privacy is important to us. Please review our Privacy Policy to
                    understand how we collect, use, and disclose information about you.
                </p>
                <p>
                    <strong>Limitation of Liability:</strong> To the extent permitted by law, Ottawa seedlings shall
                    not be liable for any direct, indirect, incidental, special, or consequential damages arising out of
                    or in any way connected with the use of Ottawa seedlings or the purchase or use of any products
                    sold through Ottawa seedlings.
                </p>
                <p>
                    <strong>Governing Law:</strong> These terms and conditions shall be governed by and construed in
                    accordance with the laws of Kenya, without regard to its conflict of law provisions.
                </p>
                <p>
                    <strong>Changes to Terms:</strong> Ottawa seedlings reserves the right to update or modify these
                    terms and conditions at any time without prior notice. Changes will be effective when posted on
                    Ottawa seedlings. Your continued use of Ottawa seedlings following the posting of any changes
                    constitutes acceptance of those changes.
                </p>
                <p>
                    <strong>Contact Us:</strong> If you have any questions about these terms and conditions, please
                    contact us at <a href="contact.html">Contact</a>.
                </p>
                <p>
                    By using Ottawa seedlings, you acknowledge that you have read, understood, and agree to be bound
                    by these terms and conditions. Thank you for visiting Ottawa seedlings, and we hope you enjoy
                    your experience with us!
                </p>
                <button id="closeTermsModal">Back</button>
                <button id="agreeTerms">Agree to Continue</button>
            </div>

        </div>
    </div>

    <!-- Firebase JS SDK -->
    <script type="module">

        // Import Firebase
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
        import { getAuth, createUserWithEmailAndPassword, signOut, updateProfile } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";

        // Your Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyBUZJDLktz7qBHUPj_XtPybxz3vkz5cYlQ",
            authDomain: "seedlingsweb-b6e5e.firebaseapp.com",
            projectId: "seedlingsweb-b6e5e",
            storageBucket: "seedlingsweb-b6e5e.appspot.com",
            messagingSenderId: "1042431917002",
            appId: "1:1042431917002:web:ebea14cb0326379967ed33",
            measurementId: "G-JVWHZPDJX7"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);

        // Check if user is signed in
        auth.onAuthStateChanged((user) => {
            if (user) {
                console.log('User is signed in:', user.email);
                document.getElementById('signoutButton').style.display = 'block';
            } else {
                console.log('No user signed in');
                document.getElementById('signoutButton').style.display = 'none';
            }
        });

        // Add event listener to the form
        document.getElementById('signupForm').addEventListener('submit', async (e) => {
            e.preventDefault(); // Prevent form from submitting

            // Check if terms are agreed
            if (!document.getElementById('termsCheckbox').checked) {
                document.getElementById('errorMessage').textContent = 'Please agree to the Terms and Conditions.';
                return;
            }

            // Get form data
            const username = document.getElementById('username').value;
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;
            const errorMessage = document.getElementById('errorMessage');

            try {
                // Create user with email, password, and username
                const userCredential = await createUserWithEmailAndPassword(auth, email, password);
                await updateProfile(userCredential.user, { displayName: username }); // Set display name (username)

                alert('Sign up successful!');
                window.location.href = 'login.html'; // Redirect to login page
            } catch (error) {
                console.error('Error registering user:', error);
                errorMessage.textContent = 'Error registering user: ' + error.message;
            }
        });

        // Sign out button functionality
        document.getElementById('signOut').addEventListener('click', async () => {
            try {
                await signOut(auth);
                console.log('User signed out');
                window.location.href = 'login.html'; // Redirect to login page after sign out
            } catch (error) {
                console.error('Error signing out:', error);
            }
        });

        // Function to show the popup
        function openPopup() {
            document.getElementById("termsModal").style.display = "block";
        }

        // Function to close the popup
        function closePopup() {
            document.getElementById("termsModal").style.display = "none";
        }

        // Event listener for the terms link
        document.getElementById("termsLink").addEventListener("click", function (event) {
            event.preventDefault(); // Prevent the default link behavior
            openPopup(); // Open the popup instead
        });

        // Event listener for closing the terms modal
        document.getElementById("closeTermsModal").addEventListener("click", function () {
            closePopup(); // Close the popup
        });

        // Event listener for agreeing to terms
        document.getElementById("agreeTerms").addEventListener("click", function () {
            document.getElementById("termsCheckbox").checked = true;
            document.getElementById("termsCheckbox").disabled = false;
            closePopup(); // Close the popup after agreeing
        });

        // Firebase initialization and authentication code
        // (Add your Firebase configuration and authentication logic here)

    </script>
</body>

</html>