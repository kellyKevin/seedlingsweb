<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Display Data from Firestore</title>
    <link rel="stylesheet" href="test.css">
</head>

<body>
    <div class="container" id="fruits-container">
        <!-- Fruits data will be inserted here -->
    </div>
    <div class="container" id="trees-container">
        <!-- Trees data will be inserted here -->
    </div>

    <!-- Firebase JS SDK -->
    <script type="module">
        // Import Firebase
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
        import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-analytics.js";
        import { getFirestore, collection, getDocs } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

        // Your Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyBUZJDLktz7qBHUPj_XtPybxz3vkz5cYlQ",
            authDomain: "seedlingsweb-b6e5e.firebaseapp.com",
            projectId: "seedlingsweb-b6e5e",
            storageBucket: "seedlingsweb-b6e5e.appspot.com",
            messagingSenderId: "1042431917002",
            appId: "1:1042431917002:web:ebea14cb0326379967ed33",
            measurementId: "G-JVWHZPDJX7"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const analytics = getAnalytics(app);
        const db = getFirestore(app);

        // Function to create a card element
        function createCard(docId, data) {
            return `
                <div class="card">
                    <img src="${data.imagetree1}" alt="${data.Description}">
                    <div class="card-title">${docId}</div>
                    <div class="card-desc">${data.Description}</div>
                    <div class="card-price">${data.price}</div>
                </div>
            `;
        }

        // Fetch and display data from the collection
        async function displayCollection(collectionName, containerId) {
            try {
                console.log(`Fetching data from collection: ${collectionName}`);
                const container = document.getElementById(containerId);
                container.innerHTML = ''; // Clear existing content
                const querySnapshot = await getDocs(collection(db, collectionName));
                if (querySnapshot.empty) {
                    container.innerHTML = `<p>No data found in the ${collectionName} collection.</p>`;
                } else {
                    querySnapshot.forEach((doc) => {
                        console.log(`Document ID: ${doc.id}, Data:`, doc.data()); // Log fetched data
                        container.innerHTML += createCard(doc.id, doc.data());
                    });
                }
                console.log(`Data from ${collectionName} displayed successfully.`);
            } catch (error) {
                console.error(`Error fetching data from ${collectionName}:`, error);
            }
        }

        // Display both collections
        displayCollection("fruits ", "fruits-container");
        displayCollection("trees", "trees-container");
    </script>
</body>

</html>
